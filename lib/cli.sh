######################################################################
#<
#
# Function: code rc = p6_git_cmd(cmd, ...)
#
#  Args:
#	cmd - 
#	... - 
#
#  Returns:
#	code - rc
#
#>
######################################################################
p6_git_cmd() {
    local cmd="$1"
    shift 1

    local log_type
    case $cmd in
        *) log_type=p6_run_write_cmd ;;
    esac    
    
    p6_run_code "$log_type git $cmd $@"
    local rc=$?

    p6_return_code_as_code "$rc";
}

######################################################################
#<
#
# Function: p6_git_p6_status()
#
#>
######################################################################
p6_git_p6_status() {

  p6_git_cmd status --ignore-submodules="${_git_status_ignore_submodules}" "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_diff()
#
#>
######################################################################
p6_git_p6_diff() {

  p6_git_cmd diff --no-ext-diff "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_log()
#
#>
######################################################################
p6_git_p6_log() {

  local branch=$(p6_git_branch_get)

  local branches
  local count
  if p6_string_eq "master" "$branch"; then
    count=-10
  else
    count="master..${branch}"
  fi

  git log \
    --graph \
    --abbrev-commit \
    --date=relative \
    --decorate \
    --pretty="format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'" \
    $count \
    "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_checkout()
#
#>
######################################################################
p6_git_p6_checkout() {

  p6_git_cmd checkout "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_branch()
#
#>
######################################################################
p6_git_p6_branch() {

  p6_git_cmd branch --verbose --verbose "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_branch_create()
#
#>
######################################################################
p6_git_p6_branch_create() {

    p6_git_p6_checkout -b "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_pull()
#
#>
######################################################################
p6_git_p6_pull() {

    p6_git_cmd pull --rebase --autostash --ff-only "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_push()
#
#>
######################################################################
p6_git_p6_push() {

    p6_git_cmd push -u "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_push_tags{()
#
#>
######################################################################
p6_git_p6_push_tags(){ 

    p6_git_cmd push --tags "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_sync()
#
#>
######################################################################
p6_git_p6_sync() {

  p6_git_pull && \
    p6_git_push    
}

######################################################################
#<
#
# Function: p6_git_p6_merge()
#
#>
######################################################################
p6_git_p6_merge() {

    p6_git_cmd merge "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_reset_head_hard()
#
#>
######################################################################
p6_git_p6_reset_head_hard() {

    p6_git_cmd reset HEAD --hard "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_reset_head_ago_one()
#
#>
######################################################################
p6_git_p6_reset_head_ago_one() {

    p6_git_cmd reset HEAD^ "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_commit()
#
#>
######################################################################
p6_git_p6_commit() {

    p6_git_cmd commit --verbose "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_commit_last_edit()
#
#>
######################################################################
p6_git_p6_commit_last_edit() {

    p6_git_p6_commit --amend "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_fetch()
#
#>
######################################################################
p6_git_p6_fetch() {

    p6_git_cmd fetch --all "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_clone()
#
#>
######################################################################
p6_git_p6_clone() {

    p6_git_cmd clone --resurse-submodules "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_revert()
#
#>
######################################################################
p6_git_p6_revert() {

    p6_git_cmd revert "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_grep_files()
#
#>
######################################################################
p6_git_p6_grep_files() {

    p6_git_cmd grep --files-with-match "$@"
}

######################################################################
#<
#
# Function: p6_git_p6_grep()
#
#>
######################################################################
p6_git_p6_grep() {

    p6_git_cmd grep --word-regexp "$@"
}